# Configuration

In order to use the `Esp` to provide SPID/CIE capability to your software, you need to perform the following activities:

### Assessment
During the assessment phase, all the information and data are collected that must be communicated to AgID (SPID) or Istituto Poligrafico (CIE) via e-mail and entered in the metadata, that is the configuration file for the service.
Furthermore, the required security level (L1 - L2 - L3 for SPID OR L3 for CIE) and the set of SPID/CIE attributes required during authentication (BASIC or FULL according to the SPID attributes table or eIDAS Minimum set for CIE).

### Setup Test Environment
Namirial will prepare the test environment and start the verifications based on the data provided and will send to the customer the accesses for the Test environment, together with:
- CCA certified;
- Dedicated endpoints of the API and for the redirect of the user during the SPID authentication phase;
- Test metadata to be published on a URL in https: // relating to the customer domain. This URL will be indicated in the SPID/CIE membership request email to be sent to the SPID/CIE Technical Institute.
Once the integration phase has been completed and the correct functioning on the customer side has been ascertained, Namirial will take care of communications with SPID/CIE Technical Institute for testing the environment, requesting, on behalf of the customer, to join SPID/CIE as a Service Provider.

### Testing
SPID/CIE Technical Institute will carry out the tests both on the adherence of the SAML SPID protocol (carried out within ESP), and on the creation of the customer portal that integrates ESP, outside the Namirial perimeter. It will communicate any requests for clarification, discrepancies and so on to the technical reference indicated by Namirial.

### Deploy in production SPID
If the tests have been successful, AgID will send to the administrative contact of the Service provider identified during the assessment phase a copy of the agreement and of the contract (insert contract if a private subject) to be returned, together with the other attachments sent by AgID, within X calendar days filled in and signed with qualified signature. The Customer, among other items, must indicate in the agreement and in the contract (insert contract if a private person) a contact person (Name, Surname and PEC address), as well as upload (in the appropriate space) a company logo;
The Customer will send this agreement to AgID, via certified [e-mail](protocollo@pec.agid.gov.it), also attaching to the email:
- a letter on headed paper digitally signed by the legal representative and containing a description of the service to be provided;
- an Excel summary of the services that will be made available on SPID (provided by AgID together with the agreement).

At the same time, Namirial deals with the generation of the CSR file (Certificate Signing Request), for the purpose of compiling the Registration Request document, since it is necessary to make a request to generate a production Electronic Seal certificate to the AgID to be used in the application. of ESP production. In the PDF Registration Request, it is by Namirial to fill in the fields: As; Type of Certificate; CSR hash described in the AgID procedure to be included in the Registration Request;
The Customer must send the AgID a second certified email (on which he will receive more detailed information), with a ZIP file attached;
- the PDF of the Registration Request, signed by the legal representative and in PAdES format;
- the CSR generated by Namirial.

### Deploy in production CIE
...

### GO LIVE!!
...